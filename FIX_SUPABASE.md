# üîß –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è Supabase –ë–î

## –ü—Ä–æ–±–ª–µ–º–∞
–ó–∞—Ä–∞–∑ –ø–∞—Ä—Å–µ—Ä —Ñ—ñ–ª—å—Ç—Ä—É—î –¥—É–±–ª—ñ–∫–∞—Ç–∏ —ñ –≤ Python, —ñ –≤ SQL UNIQUE INDEX. –ê–ª–µ –¥–ª—è –ø–æ–≤–Ω–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó –ø–æ—Ç—Ä—ñ–±–Ω–æ **–≤–∏–¥–∞–ª–∏—Ç–∏ UNIQUE INDEX** –∑ –ë–î —ñ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ **–í–°–ï**.

## –†—ñ—à–µ–Ω–Ω—è
–í–∏–¥–∞–ª–∏—Ç–∏ UNIQUE INDEX –≤ –ë–î, –ø–∞—Ä—Å–µ—Ä –≤–∂–µ –æ–Ω–æ–≤–ª–µ–Ω–æ —â–æ–± –ø–∏—Å–∞—Ç–∏ **–í–°–ï** –±–µ–∑ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤.

---

## üìã –©–æ –∑—Ä–æ–±–∏—Ç–∏ –í–†–£–ß–ù–£:

### 1Ô∏è‚É£ –í–∏–¥–∞–ª–∏—Ç–∏ UNIQUE INDEX –≤ Supabase
1. –í—ñ–¥–∫—Ä–∏–π **Supabase Dashboard** ‚Üí —Ç–≤—ñ–π –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–π–¥–∏ –¥–æ **SQL Editor**
3. –í–∏–∫–æ–Ω–∞–π –∫–æ–º–∞–Ω–¥—É:

```sql
DROP INDEX IF EXISTS rates_uq_full;
```

4. –ù–∞—Ç–∏—Å–Ω–∏ **Run**

### 2Ô∏è‚É£ –û—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é rates
–ü—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É, **–≤–∏–¥–∞–ª–∏ –≤—Å—ñ –¥–∞–Ω—ñ** –∑ —Ç–∞–±–ª–∏—Ü—ñ:

```sql
TRUNCATE TABLE rates;
```

–ê–±–æ —è–∫—â–æ TRUNCATE –Ω–µ –ø—Ä–∞—Ü—é—î:

```sql
DELETE FROM rates;
```

### 3Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —ñ–Ω–¥–µ–∫—Å –≤–∏–¥–∞–ª–µ–Ω–∏–π
–í–∏–∫–æ–Ω–∞–π —Ü–µ–π –∑–∞–ø–∏—Ç —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å:

```sql
SELECT indexname, indexdef 
FROM pg_indexes 
WHERE tablename = 'rates' 
AND indexname = 'rates_uq_full';
```

**–ú–∞—î—à –ø–æ–±–∞—á–∏—Ç–∏:** –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (0 —Ä—è–¥–∫—ñ–≤)

---

## ‚úÖ –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ:
–ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ—á–Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ **–ë–ï–ó –§–Ü–õ–¨–¢–†–Ü–í** –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É Cron Job!

**–í—Å—ñ** –∫—É—Ä—Å–∏ –∑ RAW –±—É–¥—É—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ñ –≤ –ë–î, –≤–∫–ª—é—á–∞—é—á–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –±—É–¥–µ—à —Ä–æ–±–∏—Ç–∏ –≤ –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É (Flutter).

---

## üîç –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å:
- **Python:** –í–∏–¥–∞–ª–µ–Ω–æ `is_rate_changed()` —ñ `get_last_rates()` ‚úÖ
- **SQL:** –í–∏–¥–∞–ª–µ–Ω–æ `UNIQUE INDEX rates_uq_full` ‚úÖ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –≤ –ë–î! üéâ
